{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport { UserContext } from 'pages/_app';\n\nfunction LoginCheck(props) {\n  _s();\n\n  var userContext = useContext(UserContext);\n  console.log('run LoginCheck');\n  var localStorageRef = JSON.parse(localStorage.getItem('userInfo')); // console.log('localStorageRef =')\n  // console.log(localStorageRef.token)\n\n  if (!userContext.loginState.isLogin && localStorageRef) {\n    var requestOptions1 = {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + localStorageRef.token\n      }\n    };\n    fetch('http://localhost/wp-json/wp/v2/users/me', requestOptions1) // test if token can be used on other api\n    .then(function (resf1) {\n      return resf1.json();\n    }) // necessary!\n    .then(function (data1) {\n      userContext.loginDispatch({\n        type: 'login',\n        token: localStorageRef.token,\n        mail: data1.name,\n        pass: '',\n        id: data1.id\n      });\n      Router.push('/');\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }\n\n  return props.children;\n}\n\n_s(LoginCheck, \"j5sV9rHnklY0KPGfLa+JuIW0EIQ=\");\n\n_c = LoginCheck;\nexport default LoginCheck;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginCheck\");","map":{"version":3,"sources":["/Users/jtweng/Desktop/record/OSU/mac/practice/docker/test/client/components/LoginCheck.js"],"names":["React","UserContext","LoginCheck","props","userContext","useContext","console","log","localStorageRef","JSON","parse","localStorage","getItem","loginState","isLogin","requestOptions1","method","headers","token","fetch","then","resf1","json","data1","loginDispatch","type","mail","name","pass","id","Router","push","err","children"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,WAAR,QAA0B,YAA1B;;AAEA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AAAA;;AACzB,MAAMC,WAAW,GAAGC,UAAU,CAACJ,WAAD,CAA9B;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,MAAMC,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAxB,CAHyB,CAIvB;AACA;;AACA,MAAG,CAACR,WAAW,CAACS,UAAZ,CAAuBC,OAAxB,IAAmCN,eAAtC,EAAsD;AACpD,QAAMO,eAAe,GAAG;AACtBC,MAAAA,MAAM,EAAE,KADc;AAEtBC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYT,eAAe,CAACU;AAA/C;AAFa,KAAxB;AAIAC,IAAAA,KAAK,CAAC,yCAAD,EAA4CJ,eAA5C,CAAL,CACA;AADA,KAEGK,IAFH,CAEQ,UAAAC,KAAK;AAAA,aAAIA,KAAK,CAACC,IAAN,EAAJ;AAAA,KAFb,EAE+B;AAF/B,KAGGF,IAHH,CAGQ,UAAAG,KAAK,EAAI;AACbnB,MAAAA,WAAW,CAACoB,aAAZ,CAA0B;AAACC,QAAAA,IAAI,EAAC,OAAN;AAAeP,QAAAA,KAAK,EAACV,eAAe,CAACU,KAArC;AAA4CQ,QAAAA,IAAI,EAACH,KAAK,CAACI,IAAvD;AAA6DC,QAAAA,IAAI,EAAC,EAAlE;AAAsEC,QAAAA,EAAE,EAACN,KAAK,CAACM;AAA/E,OAA1B;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAY,GAAZ;AACD,KANH,WAOS,UAAAC,GAAG;AAAA,aAAK1B,OAAO,CAACC,GAAR,CAAYyB,GAAZ,CAAL;AAAA,KAPZ;AAQD;;AACH,SAAO7B,KAAK,CAAC8B,QAAb;AACD;;GArBQ/B,U;;KAAAA,U;AAuBT,eAAeA,UAAf","sourcesContent":["import React from 'react'\nimport {UserContext} from 'pages/_app'\n\nfunction LoginCheck(props) {\n  const userContext = useContext(UserContext)\n  console.log('run LoginCheck')\n  const localStorageRef = JSON.parse(localStorage.getItem('userInfo'))\n    // console.log('localStorageRef =')\n    // console.log(localStorageRef.token)\n    if(!userContext.loginState.isLogin && localStorageRef){\n      const requestOptions1 = {\n        method: 'GET',\n        headers: { 'Authorization': 'Bearer ' + localStorageRef.token },\n        };\n      fetch('http://localhost/wp-json/wp/v2/users/me', requestOptions1) \n      // test if token can be used on other api\n        .then(resf1 => resf1.json()) // necessary!\n        .then(data1 => {\n          userContext.loginDispatch({type:'login', token:localStorageRef.token, mail:data1.name, pass:'', id:data1.id})\n          Router.push('/')\n        })\n        .catch(err  => console.log(err))\n    } \n  return props.children\n}\n\nexport default LoginCheck\n"]},"metadata":{},"sourceType":"module"}