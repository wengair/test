{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport styles from 'client/styles/Edit.module.css';\nimport { UserContext } from 'pages/_app';\n\nfunction Edit() {\n  _s();\n\n  var userContext = useContext(UserContext);\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      title = _useInput2[0],\n      bindTitle = _useInput2[1],\n      resetTitle = _useInput2[2];\n\n  var _useInput3 = useInput(''),\n      _useInput4 = _slicedToArray(_useInput3, 3),\n      content = _useInput4[0],\n      bindContent = _useInput4[1],\n      resetContent = _useInput4[2];\n\n  console.log('in edit');\n  console.log(userContext.loginState); // console.log('post=')\n  // console.log(post)\n\n  var submitHandler = function submitHandler(e) {\n    // ----------fetch version get token---------------\n    var requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: email,\n        password: pass\n      })\n    };\n    fetch(toeknUrl, requestOptions).then(function (resf) {\n      return resf.json();\n    }).then(function (data) {\n      if (data.token) {\n        // success login\n        console.log(data);\n        userContext.loginDispatch({\n          type: 'login',\n          token: data.token,\n          mail: data.user_display_name,\n          pass: pass,\n          id: data.id\n        });\n        localStorage.setItem('userInfo', JSON.stringify({\n          name: data.user_display_name,\n          token: data.token\n        }));\n        Router.push('/');\n      } else {\n        // wrong information\n        userContext.loginDispatch({\n          type: 'error',\n          error: 'wrong email or password'\n        });\n        resetEmail('');\n        resetPass('');\n      }\n    })[\"catch\"](function (err) {\n      // other errors\n      userContext.loginDispatch({\n        type: 'error',\n        error: err\n      });\n    }); // ------------------------------------------------\n\n    e.preventDefault();\n  };\n\n  return __jsx(\"div\", {\n    className: \"formConatainer\"\n  }, __jsx(\"form\", {\n    onSubmit: submitHandler,\n    className: styles.form\n  }, __jsx(\"div\", {\n    className: styles.formOption\n  }, __jsx(\"label\", {\n    className: styles.formLabel\n  }, \"Title: \"), __jsx(\"input\", _extends({}, bindTitle, {\n    type: \"text\",\n    className: styles.formTextarea,\n    ref: inputRef\n  }))), __jsx(\"div\", {\n    className: styles.formOption\n  }, __jsx(\"label\", {\n    className: styles.formLabel\n  }, \"Content: \"), __jsx(\"input\", _extends({}, bindContent, {\n    type: \"password\",\n    className: styles.formTextarea\n  }))), __jsx(\"button\", {\n    className: styles.formSubmit\n  }, \"Submit\")));\n}\n\n_s(Edit, \"DpWVthlaZVm1i6UV2Ma5T6OqoSU=\", true);\n\n_c = Edit;\nexport default Edit;\n\nvar _c;\n\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"sources":["/Users/jtweng/Desktop/record/OSU/mac/practice/docker/test/pages/posts/[id]/Edit.js"],"names":["React","useContext","styles","UserContext","Edit","userContext","useInput","title","bindTitle","resetTitle","content","bindContent","resetContent","console","log","loginState","submitHandler","e","requestOptions","method","headers","body","JSON","stringify","username","email","password","pass","fetch","toeknUrl","then","resf","json","data","token","loginDispatch","type","mail","user_display_name","id","localStorage","setItem","name","Router","push","error","resetEmail","resetPass","err","preventDefault","form","formOption","formLabel","formTextarea","inputRef","formSubmit"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react'\nimport styles from 'client/styles/Edit.module.css'\nimport {UserContext} from 'pages/_app'\n\nfunction Edit() {\n  const userContext = useContext(UserContext)\n  const [title, bindTitle, resetTitle] = useInput('')\n  const [content, bindContent, resetContent] = useInput('')\n\n  console.log('in edit')\n  console.log(userContext.loginState)\n  // console.log('post=')\n  // console.log(post)\n\n  const submitHandler = e => {\n    // ----------fetch version get token---------------\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ username: email, password:pass })\n    };\n    fetch(toeknUrl, requestOptions)\n    .then(resf => resf.json())\n    .then(data => {\n      if(data.token){\n        // success login\n        console.log(data)\n        userContext.loginDispatch({type:'login', token:data.token, mail:data.user_display_name, pass:pass, id:data.id})\n        localStorage.setItem('userInfo', JSON.stringify({name:data.user_display_name, token:data.token}))\n        Router.push('/')\n      } else {\n        // wrong information\n        userContext.loginDispatch({type:'error', error:'wrong email or password'})\n        resetEmail('')\n        resetPass('')\n      }\n    })\n    .catch(err => {\n      // other errors\n      userContext.loginDispatch({type:'error', error:err})\n    })\n    // ------------------------------------------------\n    e.preventDefault()\n  }\n  return (\n    <div className=\"formConatainer\">\n      <form onSubmit={submitHandler} className={styles.form}>\n        <div className={styles.formOption}>\n          <label className={styles.formLabel}>Title: </label>\n          <input {...bindTitle} type=\"text\" className={styles.formTextarea} ref={inputRef}/>\n        </div>\n        <div className={styles.formOption}>\n          <label className={styles.formLabel}>Content: </label>\n          <input {...bindContent} type=\"password\" className={styles.formTextarea}/>\n        </div>\n        {/* <div style={{height:'10px',textAlign:'center'}}>\n          {userContext.error && !email && <span style={{color:'red'}}>Wrong email or password</span>}\n        </div> */}\n        <button className={styles.formSubmit}>Submit</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Edit\n"]},"metadata":{},"sourceType":"module"}